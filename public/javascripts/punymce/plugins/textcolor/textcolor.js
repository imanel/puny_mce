(function(a){a.plugins.TextColor=function(d){var c="000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF";var f=a.DOM,b=a.Event,g=a.each,h=a.extend,e;if(!d.settings.textcolor||d.settings.textcolor.skip_css){f.loadCSS(a.baseURL+"/plugins/textcolor/css/editor.css")}e=h({colors:c},d.settings.textcolor);h(d.commands,{mceColor:function(w,s,o){var k,x=this,i=d.settings.id,j=f.getPos(o.target),q,l;if(d.hideMenu){return d.hideMenu()}function m(n){d.hideMenu=null;b.remove(document,"click",m);b.remove(d.getDoc(),"click",m);f.get(i+"_mcolor").style.display="none";return 1}k=f.get(i+"_mcolor");if(!k){k=f.get(i+"_t");k=f.add(document.body,"div",{id:i+"_mcolor","class":"punymce_color punymce"});k=f.add(k,"table",{"class":"punymce"});k=f.add(k,"tbody");q=8;g(e.colors.split(","),function(n){if(q==8){r=f.add(k,"tr");q=0}q++;b.add(f.add(f.add(r,"td"),"a",{href:"#",style:"background:#"+n}),"mousedown",function(p){m.call(x);d.execCommand("forecolor",0,"#"+n);return b.cancel(p)})})}b.add(document,"click",m,x);b.add(d.getDoc(),"click",m,x);d.hideMenu=m;e=f.get(i+"_mcolor").style;e.left=j.x+"px";e.top=(j.y+o.target.clientHeight+2)+"px";e.display="block"}});h(d.tools,{textcolor:{cmd:"mceColor",title:a.I18n.textcolor}})};a.extend(a.I18n,{textcolor:"Text color"})})(punymce);